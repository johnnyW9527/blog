####  1.1 安装redis

##### 1.1.1 下载redis

> https://download.redis.io/releases/

##### 1.1.2 将redis安装包拷贝到/opt/

##### 1.1.3 解压

> tar -zvxf redis-6.2.1.tar.gz

##### 1.1.4 安装gcc

> yum install gcc

##### 1.1.5 进入目录

> cd redis-6.2.1

##### 1.1.6 编译安装

> make && make install

##### 1.1.7 查看安装目录: /usr/local/bin

- redis-benchmark：性能测试工具，可以在自己本子允许，看看自己本子性能如何
- redis-check-aof：修复有问题的AOF文件
- redis-check-dump：修复有问题的dump.rdb文件
- redis-sentinel：redis集群使用
- redis-server：redis服务器启动命令
- redis-clit：客户端，操作入口



#### 1.2 启动redis

##### 1.2.1 前台启动

```
redis-server
```

不推荐，关闭启动窗口

##### 1.2.2 后端启动

```
cp /opt/redis-6.2.1/redis.conf /etc
vi redis-conf
daemonize yes
redis-server /etc/redis.conf
```

##### 1.2.3 关闭redis

> kill -9 pid
>
> redis-cli shutdown

##### 1.2.4 进入redis命令窗口

> redis-cli

##### 1.2.5 redis命令大全

> http://doc.redisfans.com/

#### 1.3 redis相关知识

* 默认端口6379
* 默认16个数据库，类似数组的下标从0开始，初始默认使用0号库
* 使用select <dbid>来切换数据库，如：select 1，切换到第2个库
* 统一密码管理，所有的库密码相同
* dbsize：查看当前数据库的key的数量
* flushdb：情况当前库
* flushall：清空全部库

> redis是单线程+多路IO复用技术
>
> 多路复用是指使用一个线程来检测多个文件描述符（socket）的就绪状态，比如调用select和poll函数，传入多个文件描述符，如果有一个文件描述符就绪，则返回，否则阻塞到超时，得到就绪状态后进行真正的操作可以在同一个线程里执行，也可以启动线程执行（比如使用线程池）
>
> 串行 vs 多线程 + 锁（memcached） vs 单线程 + 多路复用（redis）
>
> redis6.0中提供了多线程，命令解析和io数据读写这部分采用了多线程，而命令的执行还是采用的是单线程，多个客户端发送来的命令会在同一个线程去执行，相当于排队执行，效率极高